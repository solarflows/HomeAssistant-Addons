### 2.19.4 (2025-09-17)
2025-09-15 Lucky v2.19.4
    1. FileBrowser 升级至 v2.43.0。
    2. Cloudflared 同步至最新官方源码。
    3. rclone 同步至最新官方源码。
    4. Web 服务测速优化
        HTTPS 下载测速请求尝试禁用 TCP 连接复用。
        因为多tcp连接可以充分利用多线程 TLS 加解密处理，在硬件性能支持的情况下，提升内网 HTTPS 测速下载接近带宽极限的能力。
    5. Cloudflare Tunnel
        使用 Lucky 全局 DNS 设置解析 Edge 节点 IP，避免局域网默认 DNS 导致的解析污染问题。


2025-09-13 v2.19.3
    1. 修复前端问题
    2. Web服务：修复了在Web服务中的HTTPS规则，当默认规则设置为关闭连接时，如果子规则的前端为纯IP，未能正确识别LocalIP导致访问连接被关闭的问题。
    3. 在线测速优化：在线测速功能改为使用WebSocket发送ping pong方式计算ping时间，以获取更加贴近真实网络的ping值。在线测前端面板不再兼容原版Homebox，默认内置测速前端面板源改为https://cdn.66666.host/homebox/ ，用户可以自行构建面板源（https://github.com/gdy666/homebox）。

2025-09-12 v2.19.2
    1. Web 服务子规则类型 “测速后端” 更名为 “在线测速”。
    直接访问子规则即可完成测速，无需额外配置。
    与原版 Homebox 使用体验保持一致，如需测试内网速度，只需在前端地址中增加一条内网 IP 即可。
    2. 新增 背景模糊度设置，
    3. 优化若干前端细节
    4. 修复了使用第三方图片作为背景时可能通过 referer 头暴露后台域名和端口的风险。


2025-09-09 Lucky v2.19.1
    1. IP 地址库
    1.1 集成最新 ip2region 查询客户端，支持 IPv6。
    ip2region 官方提供的 IPv6 数据库信息存在不准确以及文件体积过大的情况，不推荐使用。
    如须体验，不建议使用缓存模式，在 Linux 系统下，缓存整个 IPv6 数据文件可能导致内存占用过高触发 OOM。
    1.2 上传 IP 地址库文件时，新增上传进度显示
    2.DDNS/acme
    新增 DuckDNS 支持 （不建议使用，如遇问题无须反馈）
    3.Web服务
    修复 SNI 功能在处理非英文域名（如中文域名）时的识别问题
    4.移动端界面适配优化。
    本版本支持 Windows 7 与 Windows Server 2008。

2025-09-07 v2.19.0 beta1
    1.Web服务：
    修复：调整 SNI 默认超时时间，解决 Lucky 总览页面频繁断开 WebSocket 连接的问题。
    新增：反向代理新增对 Nginx 变量 $ssl\_client\_cert 的兼容支持。
    2.前端新增暗黑模式
    3.lucky设置新增支持设置自定义背景图片或背景颜色
    注意：从本版本开始，不再支持 Windows 7 与 Windows Server 2008。

### 2.18.6 (2025-08-27)
    2025-08-26 v2.18.6
        1.SNI 分流日志优化
        日志中新增对 SNI 信息的完整记录
        2.增强安全防护
        当请求的链接未携带 SNI 信息，且仅存在默认 SNI 分流规则时，将直接关闭连接，以进一步防止 Web 端口服务被意外暴露。
        3.稳定性修复
        修复底层 SNI 信息读取过程中小概率的越界问题，避免因数组越界导致的协程崩溃。
        受影响版本：>= 2.18.0 且 <= 2.18.5。

### 2.18.5 (2025-08-25)
2025-08-24 v2.18.5 更新日志
    1. 修复由低于 v2.15.0 的版本升级时，可能导致 DDNS 配置丢失的情况。
    2. 修复前端已知 Bug
    3. Web 服务功能优化
    新增主规则快捷编辑功能：
    支持批量添加、修改、删除前端域名；
    支持批量替换、修改后端配置；
    新增「复制 Web 服务规则」功能。
    4.rclone 升级至 v1.17.0。

### 2.18.1 (2025-07-31)
```2025-07-12 v2.18.1beta
    1.FileBrowser 更新至 v2.37.0
    2.rclone 更新至 v1.70.2
    3.修复 Web服务 SNI TCP层拦截未能正确识别和判断泛域名的问题
    4.Coraza 内置规则 升级至 4.16.0
    5.Web服务 增加 SNI 分流功能
    - 注意：SNI分流功能仅供个人合法用途使用，如发现相关违法使用教程，将下线此功能。
    6.修复 一键安装在 openwrt 环境下失败的问题
    7.优化 SNI 匹配子规则域名的逻辑
```

### 2.17.8 (2025-06-05)

```2025-06-03 v2.17.8
      优化：网速趋势曲线现支持 Mbps 与 MB/s 双单位同步显示，方便同时查看网络带宽及传输速度。

    2025-06-03 v2.17.8beta
      1. 动态域名
      修复同步 dynv6 的 CNAME、SRV、MX 记录的已知问题。请先在 dynv6 平台删除原有对接记录，再重新执行同步操作。
      2. 存储管理
      存储管理功能已停止维护，阿里云盘及 WebDAV 存储功能停用，请勿再使用。如需设定本地路径，请直接在 FTP、WebDAV、FileBrowser 等文件服务中配置。
      3.Web服务
      新增“禁用连接复用”开关。如 OpenWrt 后台反向代理出现 "Unsolicited response received on idle HTTP channel starting with '0

'" 错误，请在该子规则的定制模式-网络设置中启用此开关。为提升反向代理性能，其他规则通常无需开启。
      4. WebDAV服务
      通过 RaiDrive 挂载分区时支持显示真实可用空间。
      5. FileBrowser功能修复
      修复 FileBrowser 用户自助注册功能。

    2025-05-31 v2.17.7 beta
      1. 修复证书路径导入时，由于证书域名顺序不一致导致的证书刷新失败问题。
      2. 修复对接点灯服务器时，点灯无法连接导致的协程泄漏等问题。
      3. 更新对接点灯服务器时的 User-Agent 为 “Lucky-Client/lucky666.cn”，以解决前面版本无法连接点灯服务器的问题。如该 User-Agent 被点灯服务器拉黑，与点灯对接功能将永久取消。
      4. 优化系统资源统计相关代码，改进 Lucky 总览页面，新增 CPU 使用率、实时网速曲线图与进程当前打开句柄数展示。
      5. 设置页面新增“指定监测网卡”功能，支持用户自定义监测的网卡。

    2025-05-25 v2.17.6
        1.STUN模块
          新增 NAT 类型检测功能。
        2.脚本执行
          修复 #! 首行判断错误，确保脚本正确调用 Bash 执行。
        3.DDNS
          修复部分情况下 IPv6 地址无法通过 odhcpv6 获取的问题。
        4.Web服务
          4.1 优化统计组件细节，当子规则 Coraza 未启用时不显示统计数据。
          4.2 主规则安全模式改为在 TCP 层处理，实现四层安全检测。被拦截连接直接断开，不再返回 403，提升检测效率。
          4.3 增加全局认证配置，子规则可指定继承统一认证，无需单独重复设置，实现统一管理。
          4.4 支持设置单个 IP 的 Coraza 拦截次数上限，超限后自动拉黑（功能即将开放）
        5.Coraza
          5.1 内置规则集升级至 4.14。
        6.全局设置
          6.1 新增支持自定义选择系统默认内置 DNS 解析器（选项：default）。
          6.2 新增全局无限制 CIDR 列表，列表内地址将不受所有 Web 服务速率与连接数限制（功能即将开放）。
          6.3 OpenToken安全，若验证失败超过 66 次，将自动禁用 OpenToken 并提示需重启 Lucky，同时提醒用户修改安全入口。
        7. IP信息查询
          查询性能进一步优化。
        8. 修复已知bug和其它细节及性能优化
        9.Docker版本
          预装 curl 工具包，方便容器内进行网络相关操作。

    2025-05-11 v2.17.5 beta
        1. 修复：解决上个 beta 版本因压缩错误导致无法在 Linux 系统下运行的问题。
        2. 新增：Web 服务支持 HomeBox 内网测速后端服务类型，可与 HomeBox 修改版前端配合使用。
            GitHub 地址：https://github.com/gdy666/homebox
            推荐使用 http 协议进行内网测速。
            如不想自建前端，可直接使用以下测速页面：
            http://speedtest.66666.host/
            https://speedtest.66666.host/
            请在高级配置中填写你在 Lucky 中设置的内网测速地址。

    2025-05-11 v2.17.4 Beta
      优化：计划任务模块，提升IP查询性能。
      修复：Web服务中，标记子规则时默认规则未正确隐藏的问题。
      新增：Web服务支持Proxy Protocol协议自动识别。请前往Lucky设置页面，在“全局代理协议信任的CIDR列表”中添加本地直接访问IP（如127.0.0.1）以启用。

    2025-05-09 v2.17.3
        修复在特殊 Docker 多版本 Lucky 环境下，或频繁升降级 Lucky 版本时，因配置参数丢失导致 DDNS 持续无间断检测，从而引发 CPU 占用过高的问题。
        2.17.2 版本使用正常的用户可忽略本次更新。如遇 CPU 占用过高，亦可通过编辑并保存一次 DDNS 任务恢复正常。

    2025-05-08 v2.17.2
        1. 优化了 Docker 环境的适配，提升了后台通过 Lucky 进行上传升级的成功率。
        2. 修复了 DDNS 功能：解决部分接口未返回 IP 导致协程崩溃的问题，增强了系统稳定性。
        3. 前端细节优化。

    2025-05-06 v2.17.1
      DDNS
      - 修复上个版本已知的相关 bug。
      IP地址库
      - 修复纯真IP库和ZX IPv6使用错误类型文件时，导致Lucky程序异常退出的问题。
      Web服务
      - 优化前端显示效果。

    2025-05-04 v2.17.0
      DDNS：
        修复自定义 Callback 查询时缓存失效的问题。
        Dynv6 主域名 A 记录每次都被强制同步的问题。
        修复 {ipv4Addr}、{ipv6Addr} 变量在某些情况下识别异常，导致错误触发开关的问题。
        优化 httpTimeout 参数范围为 10-60 秒，修正超时过小导致网络请求失败的问题。
        修复自定义 Callback 同时启用 IPv4/IPv6 变量时出现的异常。
        新增网卡支持负数，表示从 IP 列表末尾选择。
        DDNS 工作协程优化，实现单任务单协程。
        新增一键手动触发同步功能。
        优化接口列表的调用策略。
      Web服务：
        新增实时网速显示。
        优化 Nginx 自定义格式的兼容性。
      Coraza：
        内置规则集更新为 OWASP\_CRS/4.13.0。
      其它优化与修复：
        优化底层 DNS 查询架构，支持多个 DNS 服务器并发查询。
        添加 DDNS 任务/acme证书时时，自动识别 DNS 托管商（现支持 Cloudflare、Dynv6、华为云、DNSPod 国际版）下账号已存在的多级域名后缀，并自动加入 DDNS 设置中的自定义多级后缀列表。
        3. 修复其它已知 bug。

    2025-04-08 v2.16.1
        1. 修复 2.16.0版本中，申请证书成功后无法保存的问题。
        2. 修正了在lucky启动时，WebDAV和FileBrowser模块防火墙端口放行异常的问题。
        3. 重新支持 Windows 7 和 Windows Server 2008 R2 系统。（没测试）

    2025-04-08 v2.16.0
      后台设置：
        - 新增：增加强制HTTPS访问的开关，HTTP请求将自动重定向到HTTPS。
      Web服务：
        - 新增：文本输出功能支持禁用长连接。
        - 修复：文件服务的跨域开关支持问题。
      ACME（证书管理）：
        - 新增：支持同时申请多个ACME证书。
        - 新增：支持手动中止证书申请。
        - 优化：适配改善freemyip域名证书申请，主域名和泛域名无需分开记录申请。
      其他：
        - 调整：放宽后台API请求频率限制，降低“too many request”错误提示的出现概率。

    2025-03-31 v2.15.9 更新日志
      DDNS：
        新增：全面支持spaceship的10种记录类型（包括A记录、AAAA记录等）
        新增：自动识别常见二级域名后缀（如.ip-ddns.com、.ggff.net等）
        修复：已成功获取IP地址时仍显示错误提示的问题
        修复：域名包含大写字母导致重复生成记录的问题
        修复：从 v2.15 之前版本升级时，二级域名识别异常的问题

      ACME：
        新增：支持spaceship证书服务
        新增： 可自由设置 每日证书检查时间 ， 证书到期前多少天自动续期
        优化：ZeroSSL证书申请现在完全自动获取EAB验证信息（无需手动填写）※ 注意：如需在ZeroSSL官网查看证书，请确保注册邮箱填写正确

      IP地址库：
        新增：ipip格式数据库现已支持IPv6地址查询
        修复：个别情况下某个数据库返回空字符串时，现在会自动尝试查询下一个可用数据库
```

### 2.15.10 (2025-04-04)

```
2025-03-31 v2.15.9 更新日志

    DDNS：
    新增：全面支持spaceship的10种记录类型（包括A记录、AAAA记录等）
    新增：自动识别常见二级域名后缀（如.ip-ddns.com、.ggff.net等）
    修复：已成功获取IP地址时仍显示错误提示的问题
    修复：域名包含大写字母导致重复生成记录的问题
    修复：从 v2.15 之前版本升级时，二级域名识别异常的问题

    ACME：
    新增：支持spaceship证书服务
    新增： 可自由设置 每日证书检查时间 ， 证书到期前多少天自动续期
    优化：ZeroSSL证书申请现在完全自动获取EAB验证信息（无需手动填写）※ 注意：如需在ZeroSSL官网查看证书，请确保注册邮箱填写正确

    IP地址库：
    新增：ipip格式数据库现已支持IPv6地址查询
    修复：个别情况下某个数据库返回空字符串时，现在会自动尝试查询下一个可用数据库
```

### 2.15.8 (2025-03-25)

```
2025-03-24 v2.15.8
    1.网络唤醒
        优化: 快捷控制页面，新增设备列表信息的实时刷新机制。
        修复: 无法通过反向代理访问快捷控制页面的问题。
    2.端口转发
        修复: 由于自身转发检测不可避免的小概率误报，解决导致转发中断的已知问题。
        新增: 禁用自身转发检测开关（若确保未误用 Lucky 端口转发，可开启此选项以提升转发性能以及避免上述误报现象）。
    3.Coraza
        更新: 内置 OWASP 核心规则集v4.12.0
    4.全局变量
        新增  {DNS\_记录类型\_记录名} 格式查询 DNS 记录，若存在多个记录，则随机返回一条，例如 {DNS\_A\_lucky666.cn}
    5.FileBrowser
        同步： 最新源码
    6.SSL 证书
        新增: 多 Lucky 证书同步功能（暂未开放）
    7.Web 服务
        修复: 跨域支持异常的问题
    8.STUN
        优化UPnP提升对光猫环境的兼容性
    9.IP 过滤
        新增：自动记录 IP 接口 支持 netmask 子网掩码参数（可选），支持网段录入。
    10.其他优化
        自定义可访问内网网段
        通过  配置目录下的 localips 文件 记录，每行一条记录，支持 \*\*单 IP 或网段格式\*\*。
        localips 文件不为空时，默认内置网段将失效。
```

### 2.15.7 (2025-03-07)

```
2025-02-17 v2.15.7
    1. 端口转发
        进一步优化防止端口转发至自身的机制，避免因错误配置导致循环转发问题。
    2. DDNS
        尝试修复 Cloudflare 接口解析域名时出错的问题。
        优化任务添加/修改检测，禁止添加空域名，并防止将自身域名添加到自定义多级域名后缀列表。
    3. STUN
        更新默认内置 STUN 服务器列表
      4. SSL 证书
        改进非直接公网环境下的 IP 证书匹配处理逻辑。
      5. Web 服务
        新增{ECH} 变量支持，便于查询访问是否通过 ECH（加密客户端你好）方式。
        连接管理底层架构重构，优化性能，提高连接管理效率。
        关闭子规则时，将自动关闭所有相关连接。
        修复 User-Agent 默认过滤未正确处理空字符串的问题。
      6. 其他
        修复已知 bug，提升系统稳定性。
```

### 2.15.3 (2025-02-10)

- ```版本升级```


### 2.14.0 (2024-12-01)

```
2024-12-01 v2.14.0
1. 网络唤醒
    1.1 修复了一个 bug，该 bug 导致在服务端手动添加设备记录时，客户端首次使用时连接失败。

2. IP地址库
    2.1 新增对纯真新版地址库（czdb 格式）的支持。请自行通过纯真官网获取。

3. 点灯物联
    3.1 优化核心代码，修复小爱同学语音控制回复异常的问题。

4. DDNS
    4.1 腾讯云接口不再限制最小 TTL 为 600。
    4.2 修复了 Dynadot 更新主域名失败的问题。
5. SSL

ACME 证书 同一组域名可同时使用 Let's Encrypt、ZeroSSL 和 FreeSSL 等多个机构颁发的证书，Lucky 将自动调用有效期最长的证书。

计划任务 点灯组件绑定数量限制放宽到10个

增加隐私防护策略，防止fofa根据固定图标hash值搜索出lucky后台

增加安全入口设置检查和默认账号密码检查机制，不通过检查无法使用每个功能模块，可在设置页面禁用检查。登陆连续错误最大次数减少到30次 从2.14.0版本开始，在默认配置中，外网访问开关处于关闭状态。然而，在 lucky_base.lkcf 配置初始化后的十分钟内，系统允许外网访问。如果在这十分钟内执行了配置保存操作，则外网访问开关的设置将优先生效。如果错过了这个时间，您需要通过删除 lucky_base.lkcf 配置文件并重启 Lucky 进程的方式，使 lucky_base.lkcf 配置再次初始化。 如果未设置安全入口或未修改默认账号密码，将无法使用所有功能模块。如果您了解相关风险并确实不想进行设置，请在设置面板中启用禁用安全入口设置检查和禁用默认账号密码检查开关（此两个选项会闪烁提示）。

其他优化
```

### 2.13.8 (2024-11-22)

```
2024-11-22 v2.13.8
1. Web服务
    1.1 修复邮件发送服务对 465 端口的支持
    1.2 优化邮件发送服务调试的前端界面
    1.3 为了防止新手随意修改设置，子规则网络设置、自动 404 拉黑以及基本认证连续错误自动拉黑选项仅在定制模式下显示。
2. ACME
    2.1 修复 FreeSSL 新版接口无法申请证书的问题
3. 计划任务
    3.1 增加备份配置并发送到指定邮箱
    3.2 放宽计划任务对点灯组件数量的限制至 8 个，同时支持第三方物联网平台对接 3 个设备。
4. 其他优化
```

### 2.13.7 (2024-11-17)

```
2024-11-17 v2.13.7
1. DDNS
    1.1 修复了在双栈任务下获取 IP 地址格式错误的问题。
2. 计划任务
    2.1 计划任务现支持接入点灯物联（支持语音控制和组件控制）及巴法云，当前支持三个计划任务对接物联网平台。
    2.2 修复了计划任务修改执行周期后未生效的问题。
    2.3 计划任务新增支持操作 Lucky 管理后台外网访问开关类型。
    2.4 通过计划任务实现点灯科技开关组件与 Lucky 管理后台外网访问开关的双向绑定。
3. Web 服务
    3.1新增邮件发送功能，详细信息请查阅官网文档。 https://6.666666.host:66/docs/modules/web#%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81
4. 其它优化
```

### 2.13.5 (2024-11-03)

```
2024-11-03 v2.13.5
1. 修复了 DDNS 在个别情况下 IP 地址变动后未能及时更新的问题。
2. 修复了在特定架构下可能导致 UDP 端口转发崩溃的 bug。
3. 网络唤醒功能增强，点灯平台新增组件绑定支持。绑定组件后，可在点灯 APP 中查询并控制开关机状态。
4. 其他优化
```

### 2.13.4 (2024-11-25)

```
2024-10-24 v2.13.4
1. 更新 quic-go，修复上个版本中 HTTP/3 导致的崩溃问题。
2. 修复 filebrowser 模块部分设置在重启后会重置的 bug。
3. 其他优化。
```
### 2.13.3 (2024-10-19)

```
2024-10-19 v2.13.3
1. 修复已知bug
2. Web服务基本认证相关日志记录增加IP地址信息
3. Web服务 新增连接管理，支持手动断开连接，一键拉黑（未开放
```
### 2.13.2 Beta1 (2024-10-14)

```
2024-10-14 v2.13.2 Beta1
1. 增加一组备用 DNS 设置。
2. 默认设置 DNS 全部使用公共 DoH 服务。
3. 优化 DNS 切换策略。
4. 记录当前正常使用的 DNS 服务器，下一次启动时将优先使用。
```

### 2.13.1 Beta1 (2024-10-13)

```
2024-10-13 v2.13.1 Beta1
    1. Lucky底层DNS解析新增对DoH3、DoQ、DoH和DoT的支持。 格式参考：
        doh@https://doh.opendns.com/dns-query
        doh@doh.opendns.com
        doh3@223.5.5.5
        dot@223.5.5.5
        doq@dns.adguard.com
    2. IP地址库新增对lkdb格式的支持。
    3. Web服务连续404错误次数统计中忽略对favicon.ico的记录。
    4. 修复已知Bug。
    5. 进行细节优化。
```

### 2.13.0 Beta1 (2024-10-04)

```
2024-10-04 v2.13.0 Beta1
    1. 新增模块 — IP地址库
        1.1 自动对相关日志信息中的IP地址数据进行富化（显示IP地址信息）
        1.2 Web服务文本输出类型支持查询IP信息
        1.3 针对IP地址信息的关键词进行IP过滤（未开放）
        详细介绍和使用方法：请参考官网文档
    2. 修复Web服务中 proxy_set_header host 无效的问题
    3. 修复移动端浏览器复制域名失败的问题
    4. 优化UDP转发性能
    5. FileBrowser同步至最新源码
    6. Web服务文本输出新增变量 ClientIPInfo 和 RemoteIPInfo，支持查询IP地址信息
    7. IP过滤增加子规则类型 — IP地址信息关键字匹配，黑名单（未开放）
    8. Web服务底层连接增加全局黑名单过滤处理
    9. IP过滤全局黑名单影响范围覆盖FTP、WebDAV及FileBrowser模块
    10. 优化连接数限制策略
    11. 修复网络存储中添加WebDAV存储时导致的阻塞Bug
    12. 修复已知Bug

```

### 2.10.8 (2024-07-15)

```
1. DDNS和ACME模块 新增支持deSEC、NameSilo和帝恩爱斯-DNSLA的。
2. 修复了Webhook中未知变量被替换为空的问题。
3. 修复了DDNS模块上一版本可能未能及时更新记录的问题。
```

### 2.10.5 (2024-06-26)

```
1. DDNS、ACME新增支持DnsPod.COM（国际版）、火山引擎、Vercel、Dynadot
2. Web服务新增“关闭连接”类型
3. DDNS列表改善获取公网IP错误时的提示
4. DDNS现在支持识别用户设置的自定义多级域名后缀
5. 证书模块前后端优化
6. 修复已知bug和其它细节优化。
7. 新增了适用于 FreeBSD 系统的版本。
```

### 2.9.0 (2024-05-17)

```
- 版本升级
```
### 2.8.2 (2024-03-28)

```
- 版本升级
```

### v2.8.0 (2024-03-23)

```
- 首次推出
```
